$(function(){var e;$.get("./rest/hotspots",function(t){e=t}).success(function(){htw.debug&&console.log("initial request successfully called")}).fail(function(){htw.debug&&console.log("initial request failed")});$("#add-hotspot-form").submit(function(){htw.interactiveMap.addHotspot($(this).serialize());return!1});$(".map").on("contextmenu",function(e){var t=$(e.target);console.log(t);if(e.button!==2)return!1;if(!t.hasClass("map"))return!1;$("#hotspot-prepare-dialog").fadeOut(0);var n=Math.round(e.pageX-t.offset().left),r=Math.round(e.pageY-t.offset().top),i=n-80<20?20:n-80,s=r-80<20?20:r-80;$("#hotspot-confirm-dialog").css({top:e.pageY,left:e.pageX}).fadeIn(200);$("#hotspot-prepare-dialog").css({top:s,left:i});$("#xOff").val(n);$("#yOff").val(r);return!1});$("#hotspot-confirm-dialog-cancel").click(function(){$("#hotspot-confirm-dialog").fadeOut(50)});$("#hotspot-confirm-dialog-create").click(function(){htw.interactiveMap.prepareHotspot()});$("#hotspot-prepare-dialog-close").click(function(){$("#hotspot-prepare-dialog").fadeOut(50)});$("#navigation-anchor-up").hover(function(){$("#navigation-stops").animate({scrollTop:"-500px"},1e3,"linear")},function(){$("#navigation-stops").stop()});$("#navigation-anchor-down").hover(function(){$("#navigation-stops").animate({scrollTop:"500px"},1e3,"linear")},function(){$("#navigation-stops").stop()});$("#category-selection").find("li").click(function(){var e=$(this).data("category");if(!$(this).hasClass("itemsHidden")){$(this).addClass("itemsHidden");htw.interactiveMap.hideHotspots(e)}else{$(this).removeClass("itemsHidden");htw.interactiveMap.showHotspots(e)}});var t;$(".hotspots").on("mouseenter",function(){console.log("x");var e=$(this).stop().addClass("extended");clearTimeout(t);t=setTimeout(function(){e.children("h1, p").css("opacity","1")},400)}).on("mouseleave",function(){console.log("y");var e=$(this).stop();e.children("h1, p").css("opacity","0");clearTimeout(t);t=setTimeout(function(){e.removeClass("extended")},150)})});$(window).load(function(){$("body").removeClass("preload")});