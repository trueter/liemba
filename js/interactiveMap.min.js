var htw;htw={debug:!0};htw.interactiveMap=function(){return{init:function(e){$(e).each(function(){var e=$(this)[0];htw.interactiveMap.addHotspot(e)})},prepareHotspot:function(){$("#hotspot-form").data("hotspot-id","new");$("#hotspot-form-submit").val("Hotspot Erstellen");$("#hotspot-prepare-dialog").fadeIn(100);$("#hotspot-confirm-dialog").fadeOut(50)},createHotspot:function(e){$.post("./rest/hotspots",e).success(function(e){htw.interactiveMap.addHotspot(e);console.log(e)}).fail(function(){htw.debug&&console.log("createHotspot:fail")}).error(function(e,t,n){alert(e.status);alert(n)});return!0},updateHotspot:function(e,t){console.log("update hotspot called");$.post("./rest/hotspots/id",t).success(function(t){htw.interactiveMap.removeHotspot(e);htw.interactiveMap.addHotspot(t)}).fail(function(){htw.debug&&console.log("createHotspot:fail")}).error(function(e,t,n){alert(e.status);alert(n)});return!0},editHotspot:function(e){$("#hotspot-prepare-dialog").fadeIn(100);$("#hotspot-form").attr("data-hotspot-id",e);$("#hotspot-form-submit").val("Hotspot updaten");var t=$("#hotspot-"+e);console.log(t.data("x"));$("#hotspot-form-name").val(t.data("name"));$("#hotspot-form-description").val(t.data("description"));$("#hotspot-form-category").val(t.data("category"));$("#hotspot-form-special_icon_path").val(t.data("special_icon_path"));$("#hotspot-form-x").val(t.data("x"));$("#hotspot-form-y").val(t.data("y"));$("#hotspot-form-map").val(t.data("map"))},addHotspot:function(e){var t=e.id,n=e.map,r=e.name,i=e.description,s=e.category,o=e.special_icon_path,u=e.xOff,a=e.yOff,f=$("#"+e.map),l=f.width()-u-16,c=f.height()-a+15,h=$("<h1>"+r+"</h1>"),p=$("<p>"+i+"</p>"),d=$("<div/>",{"class":"hotspot-arrows"}),v=$("<div/>",{"class":"hotspot-destroy","data-id":t}),m=$("<div/>",{"class":"hotspot-edit","data-id":t}),g=$("<div/>",{id:"hotspot-"+t,"data-id":t,"data-name":r,"data-description":i,"data-category":s,"data-x":u,"data-y":a,"data-map":n,"data-special_icon_path":o,"class":"hotspots "+s,style:"bottom:"+c+"px;right:"+l+"px;"});g.append(h);g.append(p);g.append(d);g.append(m);g.append(v);f.append(g)},removeHotspot:function(e){$("#hotspot-"+e).remove()},deleteHotspot:function(e){$.ajax("./rest/hotspots/"+e,{type:"DELETE"}).success(function(){$("#hotspot-"+e).remove();htw.debug&&console.log("removeHotspot:success")}).fail(function(){htw.debug&&console.log("removeHotspot:fail")}).error(function(e,t,n){htw.debug&&console.log("xhr status"+e.status);htw.debug&&console.log("thrown error"+n)})},hideHotspots:function(e){if(e==="")return;$(".hotspots."+e).each(function(){$(this).css("display","none")})},showHotspots:function(e){if(e==="")return;$(".hotspots."+e).each(function(){$(this).css("display","block")})},cleanForm:function(){$("#hotspot-form-name").val();$("#hotspot-form-description").val();$("#hotspot-form-category").val();$("#hotspot-form-special_icon_path").val();$("#hotspot-form-x").val();$("#hotspot-form-y").val();$("#hotspot-form-map").val()}}}();